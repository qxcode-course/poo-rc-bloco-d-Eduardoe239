{
    "patches": [
        {
            "label": "2025-11-29_17-40-57",
            "content": "@@ -4,8 +4,9 @@\n ss Fone:\n+%0A\n",
            "lines": "1"
        },
        {
            "label": "2025-11-29_17-49-51",
            "content": "@@ -8,94 +8,4 @@\n one:\n-%0A    def __init__(self, id, number):%0A        self._id = id%0A        self._number = number%0A%0A\n",
            "lines": "1"
        },
        {
            "label": "2025-11-29_17-53-57",
            "content": "@@ -98,168 +98,4 @@\n er%0A%0A\n-    def isValid(self):%0A        valid = %220123456789.-%22%0A        for c in self._number:%0A            if c not in valid:%0A                return False%0A        return True\n",
            "lines": "5"
        },
        {
            "label": "2025-11-29_18-33-42",
            "content": "@@ -262,173 +262,4 @@\n True\n-%0A%0A    def getId(self):%0A        return self._id%0A%0A    def getNumber(self):%0A        return self._number%0A%0A    def __str__(self):%0A        return self._id + %22:%22 + self._number\n",
            "lines": "11"
        },
        {
            "label": "2025-11-29_18-59-06",
            "content": "@@ -431,2891 +431,4 @@\n mber\n-%0A%0A%0Aclass Contact:%0A    def __init__(self, name):%0A        self._name = name%0A        self._fones = %5B%5D%0A        self._favorited = False%0A%0A    def addFone(self, id, number):%0A        f = Fone(id, number)%0A        if not f.isValid():%0A            print(%22fail: invalid number%22)%0A            return%0A        self._fones.append(f)%0A%0A    def rmFone(self, index):%0A        if 0 %3C= index %3C len(self._fones):%0A            self._fones.pop(index)%0A        else:%0A            print(%22fail: invalid index%22)%0A%0A    def toggleFavorited(self):%0A        self._favorited = not self._favorited%0A%0A    def isFavorited(self):%0A        return self._favorited%0A%0A    def getFones(self):%0A        return self._fones%0A%0A    def getName(self):%0A        return self._name%0A%0A    def __str__(self):%0A        prefix = %22@ %22 if self._favorited else %22- %22%0A        out = prefix + self._name + %22 %5B%22%0A        for i, f in enumerate(self._fones):%0A            out += str(f)%0A            if i %3C len(self._fones) - 1:%0A                out += %22, %22%0A        out += %22%5D%22%0A        return out%0A%0A%0Aclass Agenda:%0A    def __init__(self):%0A        self._contacts = %5B%5D%0A%0A    def findPosByName(self, name):%0A        for i in range(len(self._contacts)):%0A            if self._contacts%5Bi%5D.getName() == name:%0A                return i%0A        return -1%0A%0A    def addContact(self, name, fones):%0A        pos = self.findPosByName(name)%0A        if pos == -1:%0A            c = Contact(name)%0A            for f in fones:%0A                c.addFone(f.getId(), f.getNumber())%0A            self._contacts.append(c)%0A        else:%0A            c = self._contacts%5Bpos%5D%0A            for f in fones:%0A                c.addFone(f.getId(), f.getNumber())%0A%0A        self._contacts.sort(key=lambda c: c.getName())%0A%0A    def getContact(self, name):%0A        pos = self.findPosByName(name)%0A        if pos == -1:%0A            return None%0A        return self._contacts%5Bpos%5D%0A%0A    def rmContact(self, name):%0A        pos = self.findPosByName(name)%0A        if pos != -1:%0A            self._contacts.pop(pos)%0A%0A    def search(self, pattern):%0A        pattern = pattern.lower()%0A        result = %5B%5D%0A        for c in self._contacts:%0A            text = c.getName().lower()%0A            for f in c.getFones():%0A                text += %22 %22 + f.getId().lower() + %22 %22 + f.getNumber().lower()%0A            if pattern in text:%0A                result.append(c)%0A        return result%0A%0A    def getFavorited(self):%0A        favs = %5B%5D%0A        for c in self._contacts:%0A            if c.isFavorited():%0A                favs.append(c)%0A        return favs%0A%0A    def __str__(self):%0A        out = %22%22%0A        for i, c in enumerate(self._contacts):%0A            out += str(c)%0A            if i %3C len(self._contacts) - 1:%0A                out += %22%5Cn%22%0A        return out%0A%0A%0Adef parse_fones(tokens):%0A    fones = %5B%5D%0A    for tok in tokens:%0A        if %22:%22 in tok:%0A            id, number = tok.split(%22:%22, 1)%0A            fones.append(Fone(id, number))%0A    return fones%0A%0A\n",
            "lines": "20"
        },
        {
            "label": "2025-11-29_23-40-07",
            "content": "@@ -3318,1326 +3318,4 @@\n es%0A%0A\n-%0Adef main():%0A    agenda = Agenda()%0A%0A    while True:%0A        line = input().strip()%0A        if line == %22%22:%0A            continue%0A%0A        parts = line.split()%0A        cmd = parts%5B0%5D%0A%0A        if cmd == %22$end%22:%0A            break%0A%0A        elif cmd == %22$add%22:%0A            name = parts%5B1%5D%0A            fones = parse_fones(parts%5B2:%5D)%0A            agenda.addContact(name, fones)%0A%0A        elif cmd == %22$show%22:%0A            print(agenda)%0A%0A        elif cmd == %22$rmFone%22:%0A            name = parts%5B1%5D%0A            index = int(parts%5B2%5D)%0A            c = agenda.getContact(name)%0A            if c is None:%0A                print(%22fail: contact not found%22)%0A            else:%0A                c.rmFone(index)%0A%0A        elif cmd == %22$rm%22:%0A            name = parts%5B1%5D%0A            agenda.rmContact(name)%0A%0A        elif cmd == %22$search%22:%0A            pattern = parts%5B1%5D%0A            res = agenda.search(pattern)%0A            for c in res:%0A                print(c)%0A%0A        elif cmd == %22$tfav%22:%0A            name = parts%5B1%5D%0A            c = agenda.getContact(name)%0A            if c is None:%0A                print(%22fail: contact not found%22)%0A            else:%0A                c.toggleFavorited()%0A%0A        elif cmd == %22$favs%22:%0A            for c in agenda.getFavorited():%0A                print(c)%0A%0A        else:%0A            print(%22fail: unknown command%22)%0A%0A%0Amain()%0A\n",
            "lines": "134"
        },
        {
            "label": "2025-11-29_23-41-00",
            "content": "@@ -0,0 +1,4643 @@\n+class Fone:%0A    def __init__(self, id, number):%0A        self._id = id%0A        self._number = number%0A%0A    def isValid(self):%0A        valid = %220123456789.-%22%0A        for c in self._number:%0A            if c not in valid:%0A                return False%0A        return True%0A%0A    def getId(self):%0A        return self._id%0A%0A    def getNumber(self):%0A        return self._number%0A%0A    def __str__(self):%0A        return self._id + %22:%22 + self._number%0A%0A%0Aclass Contact:%0A    def __init__(self, name):%0A        self._name = name%0A        self._fones = %5B%5D%0A        self._favorited = False%0A%0A    def addFone(self, id, number):%0A        f = Fone(id, number)%0A        if not f.isValid():%0A            print(%22fail: invalid number%22)%0A            return%0A        self._fones.append(f)%0A%0A    def rmFone(self, index):%0A        if 0 %3C= index %3C len(self._fones):%0A            self._fones.pop(index)%0A        else:%0A            print(%22fail: invalid index%22)%0A%0A    def toggleFavorited(self):%0A        self._favorited = not self._favorited%0A%0A    def isFavorited(self):%0A        return self._favorited%0A%0A    def getFones(self):%0A        return self._fones%0A%0A    def getName(self):%0A        return self._name%0A%0A    def __str__(self):%0A        prefix = %22@ %22 if self._favorited else %22- %22%0A        out = prefix + self._name + %22 %5B%22%0A        for i, f in enumerate(self._fones):%0A            out += str(f)%0A            if i %3C len(self._fones) - 1:%0A                out += %22, %22%0A        out += %22%5D%22%0A        return out%0A%0A%0Aclass Agenda:%0A    def __init__(self):%0A        self._contacts = %5B%5D%0A%0A    def findPosByName(self, name):%0A        for i in range(len(self._contacts)):%0A            if self._contacts%5Bi%5D.getName() == name:%0A                return i%0A        return -1%0A%0A    def addContact(self, name, fones):%0A        pos = self.findPosByName(name)%0A        if pos == -1:%0A            c = Contact(name)%0A            for f in fones:%0A                c.addFone(f.getId(), f.getNumber())%0A            self._contacts.append(c)%0A        else:%0A            c = self._contacts%5Bpos%5D%0A            for f in fones:%0A                c.addFone(f.getId(), f.getNumber())%0A%0A        self._contacts.sort(key=lambda c: c.getName())%0A%0A    def getContact(self, name):%0A        pos = self.findPosByName(name)%0A        if pos == -1:%0A            return None%0A        return self._contacts%5Bpos%5D%0A%0A    def rmContact(self, name):%0A        pos = self.findPosByName(name)%0A        if pos != -1:%0A            self._contacts.pop(pos)%0A%0A    def search(self, pattern):%0A        pattern = pattern.lower()%0A        result = %5B%5D%0A        for c in self._contacts:%0A            text = c.getName().lower()%0A            for f in c.getFones():%0A                text += %22 %22 + f.getId().lower() + %22 %22 + f.getNumber().lower()%0A            if pattern in text:%0A                result.append(c)%0A        return result%0A%0A    def getFavorited(self):%0A        favs = %5B%5D%0A        for c in self._contacts:%0A            if c.isFavorited():%0A                favs.append(c)%0A        return favs%0A%0A    def __str__(self):%0A        out = %22%22%0A        for i, c in enumerate(self._contacts):%0A            out += str(c)%0A            if i %3C len(self._contacts) - 1:%0A                out += %22%5Cn%22%0A        return out%0A%0A%0Adef parse_fones(tokens):%0A    fones = %5B%5D%0A    for tok in tokens:%0A        if %22:%22 in tok:%0A            id, number = tok.split(%22:%22, 1)%0A            fones.append(Fone(id, number))%0A    return fones%0A%0A%0Adef main():%0A    agenda = Agenda()%0A%0A    while True:%0A        line = input().strip()%0A        if line == %22%22:%0A            continue%0A%0A        parts = line.split()%0A        cmd = parts%5B0%5D%0A%0A        if cmd == %22$end%22:%0A            break%0A%0A        elif cmd == %22$add%22:%0A            name = parts%5B1%5D%0A            fones = parse_fones(parts%5B2:%5D)%0A            agenda.addContact(name, fones)%0A%0A        elif cmd == %22$show%22:%0A            print(agenda)%0A%0A        elif cmd == %22$rmFone%22:%0A            name = parts%5B1%5D%0A            index = int(parts%5B2%5D)%0A            c = agenda.getContact(name)%0A            if c is None:%0A                print(%22fail: contact not found%22)%0A            else:%0A                c.rmFone(index)%0A%0A        elif cmd == %22$rm%22:%0A            name = parts%5B1%5D%0A            agenda.rmContact(name)%0A%0A        elif cmd == %22$search%22:%0A            pattern = parts%5B1%5D%0A            res = agenda.search(pattern)%0A            for c in res:%0A                print(c)%0A%0A        elif cmd == %22$tfav%22:%0A            name = parts%5B1%5D%0A            c = agenda.getContact(name)%0A            if c is None:%0A                print(%22fail: contact not found%22)%0A            else:%0A                c.toggleFavorited()%0A%0A        elif cmd == %22$favs%22:%0A            for c in agenda.getFavorited():%0A                print(c)%0A%0A        else:%0A            print(%22fail: unknown command%22)%0A%0A%0Amain()%0A\n",
            "lines": "193"
        },
        {
            "label": "2025-11-29_23-41-58",
            "content": "@@ -1,444 +0,0 @@\n-class Fone:%0A    def __init__(self, id, number):%0A        self._id = id%0A        self._number = number%0A%0A    def isValid(self):%0A        valid_chars = %220123456789%22%0A        for c in self._number:%0A            if c not in valid_chars:%0A                return False%0A        return True%0A%0A    def getId(self):%0A        return self._id%0A%0A    def getNumber(self):%0A        return self._number%0A%0A    def __str__(self):%0A        return f%22%7Bself._id%7D:%7Bself._number%7D%22%0A\n",
            "lines": "0"
        },
        {
            "label": "2025-12-02_21-02-12",
            "content": "@@ -441,642 +441,4 @@\n r%7D%22%0A\n-%0A%0Aclass Contact:%0A    def __init__(self, name):%0A        self._name = name%0A        self._fones = %5B%5D%0A        self._favorited = False%0A%0A    def addFone(self, id, number):%0A        f = Fone(id, number)%0A        if f.isValid():%0A            self._fones.append(f)%0A        else:%0A            print(%22fail: invalid number%22)%0A%0A    def rmFone(self, index):%0A        if index %3C 0 or index %3E= len(self._fones):%0A            print(%22fail: invalid index%22)%0A        else:%0A            new_fones = %5B%5D%0A            for i in range(len(self._fones)):%0A                if i != index:%0A                    new_fones.append(self._fones%5Bi%5D)%0A            self._fones = new_fones%0A\n",
            "lines": "20"
        },
        {
            "label": "2025-12-02_22-50-06",
            "content": "class Fone:\n    def __init__(self, id, number):\n        self._id = id\n        self._number = number\n\n    def isValid(self):\n        valid_chars = \"0123456789\"\n        for c in self._number:\n            if c not in valid_chars:\n                return False\n        return True\n\n    def getId(self):\n        return self._id\n\n    def getNumber(self):\n        return self._number\n\n    def __str__(self):\n        return f\"{self._id}:{self._number}\"\n\n\nclass Contact:\n    def __init__(self, name):\n        self._name = name\n        self._fones = []\n        self._favorited = False\n\n    def addFone(self, id, number):\n        f = Fone(id, number)\n        if f.isValid():\n            self._fones.append(f)\n        else:\n            print(\"fail: invalid number\")\n\n    def rmFone(self, index):\n        if index < 0 or index >= len(self._fones):\n            print(\"fail: invalid index\")\n        else:\n            new_fones = []\n            for i in range(len(self._fones)):\n                if i != index:\n                    new_fones.append(self._fones[i])\n            self._fones = new_fones\n",
            "lines": "44"
        }
    ]
}